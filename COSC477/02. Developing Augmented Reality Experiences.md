# 02. Developing Augmented Reality Experiences

Adrian Clark, senior lecturer, School of Product Design.

## Introduction to Unity

Unity: 'real time development platform'. Not just for games.

Unity is so big, no one knows what it does any more.

Resources:

- [Unity Learn](https://learn.unity.com)
  - AR stuff now under the `XR` section
- [Community](https://unity.com/community)
- [User manual](https://docs.unity3d.com/Manual/index.html)
  - Pretty decent docs
- [Asset Store](https://assetstore.unity.com)
  - Also third-party stores like [Turbo Squid](https://turbosquid.com)
  - Prefer `fbx` files
  - To download assets purchased from the store: Window -> Package manager -> My assets

Unity:

- Use 2020.3 LTS release
- Use 3D template

Editor:

- Many windows
  - Scene
    - See and position all `GameObject`s in the scene
    - Top left, switch between translation, rotation and scale tools
    - Add Rigidbody to a GameObject to add physics
  - Game
    - What the camera sees
    - Any changes made during play mode are not saved
  - Project
    - Assets folder: contents update automatically when FS changes
  - Hierarchy
    - All game objects in the scene in a hierarchy
    - Parent nodes affect child nodes
  - Inspector
    - Modification of `GameObject` properties
    - Components: behaviors or extensions to the game objects
      - Game objects are essentially containers for components
      - UI objects have their own event systems: cannot attach click listeners etc. to 3D objects
    - Examples:
      - Renderer
      - MeshFilter
      - Camera
      - Light
        - Directional by default:
          - Infinitely far away: rays are parallel
          - Node position does not matter: only rotation
        - Spotlight: cone of influence
        - Point: sphere of influence
      - Collider
  - Console
    - Warnings, errors


Shader rendering mode:

- Opaque: alpha ignored
- Cutout: binary transparency; on or off. Use if the object has holes
- Fade: change transparency of all aspects of the material based on alpha
- Transparent: TODO

Scripting:

```csharp
// Behavior script is another component that attaches to a GameObject

// https://docs.unity3d.com/Manual/ExecutionOrder.html

// A massive number of lifecycle callbacks
public class NodeBehaviorScript: MonoBehavior {
  // Called before first frame update
  void Start() {
    Debug.log("Instantiated");
  }

  // Called every frame
  void Update() {
    if (Input.GetKey(KeyCode.UpArrow)) {
      // transform: transform of the object the script is attached to
      // localPosition: position relative to parent
      transform.localPosition += new Vector3(0, 0, 0.1f);
    }
  }

  void onMouseDown() {
    // Set up a collider on the game object
    // e.g. box collider: invisible box (hopefully) around the object
  }

  void onCollisionEnter(Collision collision) {
    // Use collider that is larger than the object: when two objects
    // come close together you can add custom behavior (e.g. 'picking up'
    // the object in AR
  }

}
```

Unity Remote:

- App installed on your phone
- Project Settings -> Editor -> Unity Remote
- Game view is streamed to your phone screen
- Touch events etc. on phone are sent the host computer

## AR

Many different SDKs available.

TOD

Unity also has AR foundation: common interface to platform-specific AR frameworks. No way of running it in the editor, which makes development very frustrating.

This course will use Vuforia:

- Available as a UnityPackage
- Each target is its own separate game object
  - Except for ground/mid air planes
  - Add game objects as children of the target in to anchor them to the target
- TODO
- Target types:
  - Image
    - From image: import image into Unity, drag image into field
    - Can also create database in the cloud
  - Cylinder
  - Multi
    - Box: six images for each face
  - 3D models and scanned models
- Adding custom targets:
  - Requires licence
    - In AR camera, go to Vuforia configuration
      - Enter license
      - Can also change settings such as scale

Vuforia AR camera:

- Replaces default camera
- World center mode:
  - First target: first target detected is the world origin
  - Device: camera always at origin
    - Need to turn off track device pose
  - Origin impacts things such as physics simulations
